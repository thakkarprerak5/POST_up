{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruv/Downloads/POST_up-main/models/Project.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\n\nexport interface IProject extends Document {\n  title: string;\n  description: string;\n  tags: string[];\n  images?: string[];\n  githubUrl?: string;\n  liveUrl?: string;\n  author: {\n    id: string;\n    name: string;\n    image?: string;\n  };\n  createdAt: Date;\n}\n\nconst ProjectSchema = new Schema<IProject>({\n  title: { type: String, required: true },\n  description: { type: String, required: true },\n  tags: { type: [String], default: [] },\n  images: { type: [String], default: [] },\n  githubUrl: { type: String },\n  liveUrl: { type: String },\n  author: {\n    id: { type: String, required: true },\n    name: { type: String, required: true },\n    image: { type: String },\n  },\n}, { timestamps: true });\n\nconst Project = (global as any).Project || mongoose.model<IProject>('Project', ProjectSchema);\n\nif (process.env.NODE_ENV === 'development') {\n  (global as any).Project = Project;\n}\n\nexport const createProject = async (data: Omit<IProject, keyof Document>) => {\n  const project = new Project(data);\n  return project.save();\n};\n\nexport const listProjects = async (query: any = {}, options: { limit?: number; sort?: any } = {}) => {\n  const { limit = 20, sort = { createdAt: -1 } } = options;\n  return Project.find(query).sort(sort).limit(limit).exec();\n};\n\nexport default Project;\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAiBA,MAAM,gBAAgB,IAAI,mHAAM,CAAW;IACzC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,MAAM;QAAE,MAAM;YAAC;SAAO;QAAE,SAAS,EAAE;IAAC;IACpC,QAAQ;QAAE,MAAM;YAAC;SAAO;QAAE,SAAS,EAAE;IAAC;IACtC,WAAW;QAAE,MAAM;IAAO;IAC1B,SAAS;QAAE,MAAM;IAAO;IACxB,QAAQ;QACN,IAAI;YAAE,MAAM;YAAQ,UAAU;QAAK;QACnC,MAAM;YAAE,MAAM;YAAQ,UAAU;QAAK;QACrC,OAAO;YAAE,MAAM;QAAO;IACxB;AACF,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,UAAU,yDAAgB,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAW,WAAW;AAE/E,wCAA4C;IAC1C,yDAAgB,OAAO,GAAG;AAC5B;AAEO,MAAM,gBAAgB,OAAO;IAClC,MAAM,UAAU,IAAI,QAAQ;IAC5B,OAAO,QAAQ,IAAI;AACrB;AAEO,MAAM,eAAe,OAAO,QAAa,CAAC,CAAC,EAAE,UAA0C,CAAC,CAAC;IAC9F,MAAM,EAAE,QAAQ,EAAE,EAAE,OAAO;QAAE,WAAW,CAAC;IAAE,CAAC,EAAE,GAAG;IACjD,OAAO,QAAQ,IAAI,CAAC,OAAO,IAAI,CAAC,MAAM,KAAK,CAAC,OAAO,IAAI;AACzD;uCAEe"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruv/Downloads/POST_up-main/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI as string;\n\nif (!MONGODB_URI) {\n  throw new Error('Please define the MONGODB_URI environment variable');\n}\n\ndeclare global {\n  var mongoose: any;\n}\n\nlet cached = global.mongoose;\n\nif (!cached) {\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nexport async function connectDB() {\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAMA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEO,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruv/Downloads/POST_up-main/models/User.ts"],"sourcesContent":["// models/User.ts\nimport mongoose, { Document, Model, Schema } from 'mongoose';\nimport bcrypt from 'bcryptjs';\n\nexport interface IProfile {\n  type: 'student' | 'mentor';\n  joinedDate: Date;\n  bio?: string;\n  enrollmentNo?: string;\n  course?: string;\n  branch?: string;\n  year?: number;\n  skills?: string[];\n  department?: string;\n  expertise?: string[];\n  position?: string;\n  experience?: number;\n  researchAreas?: string[];\n  achievements?: string[];\n  officeHours?: string;\n  projectsSupervised?: Array<{\n    id: number;\n    title: string;\n    image: string;\n    studentName: string;\n  }>;\n  socialLinks?: {\n    github?: string;\n    linkedin?: string;\n    portfolio?: string;\n  };\n  projects?: Array<{\n    id: string;\n    title: string;\n    description?: string;\n    image?: string;\n    url?: string;\n  }>;\n}\n\nexport interface IUser extends Document {\n  fullName: string;\n  email: string;\n  password: string;\n  photo?: string;\n  type: 'student' | 'mentor';\n  profile: IProfile;\n  comparePassword(candidatePassword: string): Promise<boolean>;\n}\n\n// Define profile schema\nconst profileSchema = new Schema<IProfile>({\n  type: { type: String, enum: ['student', 'mentor'], required: true },\n  joinedDate: { type: Date, default: Date.now },\n  bio: { type: String, default: '' },\n  enrollmentNo: { type: String, default: '' },\n  course: { type: String, default: '' },\n  branch: { type: String, default: '' },\n  year: { type: Number, default: 1 },\n  skills: { type: [String], default: [] },\n  department: { type: String, default: '' },\n  expertise: { type: [String], default: [] },\n  position: { type: String, default: '' },\n  experience: { type: Number, default: 0 },\n  researchAreas: { type: [String], default: [] },\n  achievements: { type: [String], default: [] },\n  officeHours: { type: String, default: 'To be scheduled' },\n  projectsSupervised: [{\n    id: { type: Number },\n    title: { type: String },\n    image: { type: String },\n    studentName: { type: String }\n  }],\n  socialLinks: {\n    github: { type: String, default: '' },\n    linkedin: { type: String, default: '' },\n    portfolio: { type: String, default: '' }\n  },\n  projects: [{\n    id: { type: String },\n    title: { type: String },\n    description: { type: String },\n    image: { type: String },\n    url: { type: String }\n  }]\n}, { _id: false });\n\nconst userSchema = new Schema<IUser>({\n  fullName: { type: String, required: true },\n  email: { type: String, required: true, unique: true },\n  password: { type: String, required: true },\n  photo: { type: String, default: '/placeholder-user.jpg' },\n  type: { type: String, enum: ['student', 'mentor'], required: true },\n  profile: { type: profileSchema, required: true }\n}, { timestamps: true });\n\n// Hash password before saving\nuserSchema.pre('save', async function() {\n  if (!this.isModified('password')) return;\n\n  const salt = await bcrypt.genSalt(10);\n  this.password = await bcrypt.hash(this.password, salt);\n});\n\n// Method to compare passwords\nuserSchema.methods.comparePassword = async function(candidatePassword: string): Promise<boolean> {\n  return bcrypt.compare(candidatePassword, this.password);\n};\n\n// Create model if it doesn't exist\nconst User = (global as any).User || mongoose.model<IUser>('User', userSchema);\n\n// For development\nif (process.env.NODE_ENV === 'development') {\n  (global as any).User = User;\n}\n\n// Helper functions\nexport const createUser = async (userData: Omit<IUser, keyof Document>) => {\n  const user = new User(userData);\n  return user.save();\n};\n\nexport const findUserByEmail = async (email: string) => {\n  return User.findOne({ email }).exec();\n};\n\nexport const findUserById = async (id: string) => {\n  return User.findById(id).exec();\n};\n\nexport const updateUserProfile = async (\n  id: string,\n  updateData: Partial<IProfile> & { username?: string }\n) => {\n  const set: Record<string, any> = {};\n\n  if (updateData.bio !== undefined) set['profile.bio'] = updateData.bio;\n  if (updateData.enrollmentNo !== undefined) set['profile.enrollmentNo'] = updateData.enrollmentNo;\n  if (updateData.course !== undefined) set['profile.course'] = updateData.course;\n  if (updateData.branch !== undefined) set['profile.branch'] = updateData.branch;\n  if (updateData.year !== undefined) set['profile.year'] = updateData.year;\n  if (updateData.skills !== undefined) set['profile.skills'] = updateData.skills;\n  if (updateData.department !== undefined) set['profile.department'] = updateData.department;\n  if (updateData.expertise !== undefined) set['profile.expertise'] = updateData.expertise;\n  if (updateData.position !== undefined) set['profile.position'] = updateData.position;\n  if (updateData.experience !== undefined) set['profile.experience'] = updateData.experience;\n  if (updateData.researchAreas !== undefined) set['profile.researchAreas'] = updateData.researchAreas;\n  if (updateData.achievements !== undefined) set['profile.achievements'] = updateData.achievements;\n  if (updateData.officeHours !== undefined) set['profile.officeHours'] = updateData.officeHours;\n  if ((updateData as any).socialLinks !== undefined) set['profile.socialLinks'] = (updateData as any).socialLinks;\n  if ((updateData as any).projects !== undefined) set['profile.projects'] = (updateData as any).projects;\n\n  if (updateData.username !== undefined) set['fullName'] = updateData.username;\n\n  return User.findByIdAndUpdate(id, { $set: set }, { new: true }).exec();\n};\n\nexport default User;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruv/Downloads/POST_up-main/auth.ts"],"sourcesContent":["// auth.ts\nimport NextAuth from 'next-auth';\nimport CredentialsProvider from 'next-auth/providers/credentials';\nimport { findUserByEmail } from './models/User';\nimport bcrypt from 'bcryptjs';\nimport { connectDB } from './lib/db';\n\nexport const authOptions = {\n  providers: [\n    CredentialsProvider({\n      name: 'Credentials',\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        try {\n          await connectDB();\n          const user = await findUserByEmail(credentials.email);\n          \n          if (!user) {\n            console.log('No user found with this email');\n            return null;\n          }\n\n          const isPasswordValid = await bcrypt.compare(credentials.password, user.password);\n          \n          if (!isPasswordValid) {\n            console.log('Invalid password');\n            return null;\n          }\n\n          return {\n            id: user._id.toString(),\n            email: user.email,\n            name: user.fullName,\n            image: user.photo,\n            role: user.type\n          };\n        } catch (error) {\n          console.error('Auth error:', error);\n          return null;\n        }\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.role = user.role;\n        token.id = user.id;\n        token.email = user.email;\n        token.name = user.name;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (session?.user) {\n        session.user.id = token.id as string;\n        session.user.role = token.role as string;\n        session.user.name = token.name as string;\n        session.user.email = token.email as string;\n      }\n      return session;\n    },\n  },\n  pages: {\n    signIn: '/login',\n  },\n  session: {\n    strategy: \"jwt\",\n  },\n  secret: process.env.NEXTAUTH_SECRET,\n};\n\n// Add these exports at the bottom of the file\nconst handler = NextAuth(authOptions);\nexport { handler as GET, handler as POST, authOptions };"],"names":[],"mappings":"AAAA,UAAU;;;;;;;;;AACV;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,cAAc;IACzB,WAAW;QACT,IAAA,qMAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,IAAI;oBACF,MAAM,IAAA,wJAAS;oBACf,MAAM,OAAO,MAAM,IAAA,mKAAe,EAAC,YAAY,KAAK;oBAEpD,IAAI,CAAC,MAAM;wBACT,QAAQ,GAAG,CAAC;wBACZ,OAAO;oBACT;oBAEA,MAAM,kBAAkB,MAAM,8KAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;oBAEhF,IAAI,CAAC,iBAAiB;wBACpB,QAAQ,GAAG,CAAC;wBACZ,OAAO;oBACT;oBAEA,OAAO;wBACL,IAAI,KAAK,GAAG,CAAC,QAAQ;wBACrB,OAAO,KAAK,KAAK;wBACjB,MAAM,KAAK,QAAQ;wBACnB,OAAO,KAAK,KAAK;wBACjB,MAAM,KAAK,IAAI;oBACjB;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,eAAe;oBAC7B,OAAO;gBACT;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,IAAI,GAAG,KAAK,IAAI;gBACtB,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,KAAK,GAAG,KAAK,KAAK;gBACxB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,SAAS,MAAM;gBACjB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;gBAC9B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;gBAC9B,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,KAAK;YAClC;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;IACA,SAAS;QACP,UAAU;IACZ;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC;AAEA,8CAA8C;AAC9C,MAAM,UAAU,IAAA,kLAAQ,EAAC"}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["file:///Users/dhruv/Downloads/POST_up-main/app/api/projects/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { createProject, listProjects } from '@/models/Project';\nimport { connectDB } from '@/lib/db';\nimport { getServerSession } from 'next-auth';\nimport { authOptions } from '@/auth';\nimport { mkdir, writeFile } from 'fs/promises';\nimport { join } from 'path';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport async function GET(request: Request) {\n  await connectDB();\n  const { searchParams } = new URL(request.url);\n  const tag = searchParams.get('tag');\n  const limit = parseInt(searchParams.get('limit') || '20', 10);\n  const authorId = searchParams.get('author');\n\n  const query: any = {};\n  if (tag) query.tags = tag;\n  if (authorId) query['author.id'] = authorId;\n\n  const projects = await listProjects(query, { limit, sort: { createdAt: -1 } });\n  return NextResponse.json(projects);\n}\n\nexport async function POST(request: Request) {\n  await connectDB();\n  const session = await getServerSession(authOptions);\n  if (!session?.user?.id) {\n    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n  }\n\n  const formData = await request.formData();\n  const title = formData.get('title')?.toString() || '';\n  const description = formData.get('description')?.toString() || '';\n  const githubUrl = formData.get('githubUrl')?.toString() || '';\n  const liveUrl = formData.get('liveUrl')?.toString() || '';\n  const tags = (formData.get('tags')?.toString() || '')\n    .split(',')\n    .map(t => t.trim())\n    .filter(Boolean);\n\n  const images: string[] = [];\n  const files = formData.getAll('images') as File[];\n  if (files && files.length) {\n    const uploadsDir = join(process.cwd(), 'public', 'uploads');\n    await mkdir(uploadsDir, { recursive: true });\n    for (const file of files) {\n      const ext = file.name.split('.').pop() || 'png';\n      const filename = `${uuidv4()}.${ext}`;\n      const filePath = join(uploadsDir, filename);\n      const bytes = await file.arrayBuffer();\n      const buffer = Buffer.from(bytes);\n      await writeFile(filePath, buffer);\n      images.push(`/uploads/${filename}`);\n    }\n  }\n\n  const project = await createProject({\n    title,\n    description,\n    tags,\n    images,\n    githubUrl,\n    liveUrl,\n    author: {\n      id: session.user.id,\n      name: session.user.name || 'Unknown',\n      image: session.user.image || undefined,\n    },\n    createdAt: new Date(),\n  } as any);\n\n  return NextResponse.json(project, { status: 201 });\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,IAAA,wJAAS;IACf,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,MAAM,aAAa,GAAG,CAAC;IAC7B,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC,YAAY,MAAM;IAC1D,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,MAAM,QAAa,CAAC;IACpB,IAAI,KAAK,MAAM,IAAI,GAAG;IACtB,IAAI,UAAU,KAAK,CAAC,YAAY,GAAG;IAEnC,MAAM,WAAW,MAAM,IAAA,mKAAY,EAAC,OAAO;QAAE;QAAO,MAAM;YAAE,WAAW,CAAC;QAAE;IAAE;IAC5E,OAAO,gLAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,IAAA,wJAAS;IACf,MAAM,UAAU,MAAM,IAAA,2LAAgB,EAAC,qJAAW;IAClD,IAAI,CAAC,SAAS,MAAM,IAAI;QACtB,OAAO,gLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,MAAM,WAAW,MAAM,QAAQ,QAAQ;IACvC,MAAM,QAAQ,SAAS,GAAG,CAAC,UAAU,cAAc;IACnD,MAAM,cAAc,SAAS,GAAG,CAAC,gBAAgB,cAAc;IAC/D,MAAM,YAAY,SAAS,GAAG,CAAC,cAAc,cAAc;IAC3D,MAAM,UAAU,SAAS,GAAG,CAAC,YAAY,cAAc;IACvD,MAAM,OAAO,CAAC,SAAS,GAAG,CAAC,SAAS,cAAc,EAAE,EACjD,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IACf,MAAM,CAAC;IAEV,MAAM,SAAmB,EAAE;IAC3B,MAAM,QAAQ,SAAS,MAAM,CAAC;IAC9B,IAAI,SAAS,MAAM,MAAM,EAAE;QACzB,MAAM,aAAa,IAAA,yGAAI,EAAC,QAAQ,GAAG,IAAI,UAAU;QACjD,MAAM,IAAA,8HAAK,EAAC,YAAY;YAAE,WAAW;QAAK;QAC1C,KAAK,MAAM,QAAQ,MAAO;YACxB,MAAM,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;YAC1C,MAAM,WAAW,GAAG,IAAA,mNAAM,IAAG,CAAC,EAAE,KAAK;YACrC,MAAM,WAAW,IAAA,yGAAI,EAAC,YAAY;YAClC,MAAM,QAAQ,MAAM,KAAK,WAAW;YACpC,MAAM,SAAS,OAAO,IAAI,CAAC;YAC3B,MAAM,IAAA,kIAAS,EAAC,UAAU;YAC1B,OAAO,IAAI,CAAC,CAAC,SAAS,EAAE,UAAU;QACpC;IACF;IAEA,MAAM,UAAU,MAAM,IAAA,oKAAa,EAAC;QAClC;QACA;QACA;QACA;QACA;QACA;QACA,QAAQ;YACN,IAAI,QAAQ,IAAI,CAAC,EAAE;YACnB,MAAM,QAAQ,IAAI,CAAC,IAAI,IAAI;YAC3B,OAAO,QAAQ,IAAI,CAAC,KAAK,IAAI;QAC/B;QACA,WAAW,IAAI;IACjB;IAEA,OAAO,gLAAY,CAAC,IAAI,CAAC,SAAS;QAAE,QAAQ;IAAI;AAClD"}}]
}