<!DOCTYPE html>
<html>
<head>
    <title>Test HTML Img Avatar</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .avatar { width: 32px; height: 32px; border-radius: 50%; object-cover; }
        .author-info { display: flex; align-items: center; gap: 10px; margin: 10px 0; }
        .fallback { width: 32px; height: 32px; border-radius: 50%; background: #e5e7eb; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #6b7280; }
    </style>
</head>
<body>
    <h1>üñºÔ∏è Test HTML Img Avatar</h1>
    
    <div class="test">
        <h3>Test 1: Direct HTML Img</h3>
        <div class="author-info">
            <img 
                src="/placeholder-user.jpg" 
                alt="Test Avatar" 
                class="avatar"
                onerror="console.log('Direct img failed'); this.style.display='none'; this.nextElementSibling.style.display='flex';"
                onload="console.log('Direct img loaded successfully');"
            />
            <div class="fallback" style="display: none;">
                T
            </div>
            <div>
                <div><strong>Test Avatar</strong></div>
                <small>Direct HTML img test</small>
            </div>
        </div>
    </div>
    
    <div class="test">
        <h3>Test 2: API Data HTML Img</h3>
        <div id="api-result">Loading...</div>
    </div>

    <script>
        async function testApiData() {
            try {
                const response = await fetch('/api/projects');
                const projects = await response.json();
                const ganpatProject = projects.find(p => p.author?.name === 'ganpat');
                
                if (ganpatProject) {
                    const imageUrl = ganpatProject.author.image || ganpatProject.author.avatar || '/placeholder-user.jpg';
                    
                    document.getElementById('api-result').innerHTML = `
                        <div class="author-info">
                            <img 
                                src="${imageUrl}" 
                                alt="${ganpatProject.author.name}" 
                                class="avatar"
                                onerror="console.log('API img failed:', '${imageUrl}'); this.style.display='none'; this.nextElementSibling.style.display='flex';"
                                onload="console.log('API img loaded successfully:', '${imageUrl}');"
                            />
                            <div class="fallback" style="display: none;">
                                ${ganpatProject.author.name.charAt(0).toUpperCase()}
                            </div>
                            <div>
                                <div><strong>${ganpatProject.author.name}</strong></div>
                                <small>API data: ${imageUrl}</small>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">
                            Check browser console for loading messages
                        </div>
                    `;
                } else {
                    document.getElementById('api-result').innerHTML = '‚ùå Ganpat project not found';
                }
            } catch (error) {
                document.getElementById('api-result').innerHTML = `‚ùå Error: ${error.message}`;
            }
        }
        
        // Run test
        window.onload = () => {
            testApiData();
            
            console.log('üîç HTML Img Avatar Test');
            console.log('1. Check if images load successfully');
            console.log('2. Check console for loading messages');
            console.log('3. If images fail, fallback should appear');
        };
    </script>
</body>
</html>
